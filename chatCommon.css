#chat-btn-open {
  position:fixed;bottom:36px;right:38px;z-index:1011;
  width:52px;height:52px;border-radius:50%;
  background:#1976d2;color:#fff;font-size:2.2em;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 2px 14px rgba(33,150,243,0.15);
  border:none;cursor:pointer;
}
#chat-popup-box {
  display:none;flex-direction:column;
  position:fixed;bottom:95px;right:38px;z-index:1012;
  width:355px;max-width:96vw;height:430px;
  background:#fff;border-radius:17px;
  box-shadow:0 8px 44px rgba(25,118,210,0.16);
  border:1.5px solid #1976d2;
  transition:all .25s;
}
#chat-popup-box.chat-fullscreen {
  position:fixed !important; left:0 !important; top:0 !important; right:0 !important; bottom:0 !important;
  width:100vw !important; height:100vh !important; max-width:100vw !important; max-height:100vh !important;
  border-radius:0 !important; z-index:2000 !important;
}
#chat-header {
  background:#1976d2;color:#fff;border-radius:17px 17px 0 0;
  padding:13px 16px 9px 16px;font-weight:bold;
  display:flex;align-items:center;justify-content:space-between;
  font-size:1.08em;
}
#chat-header-title {font-size:1.13em;}
#chat-popup-close {
  background:#fff;border:none;color:#d32f2f;font-size:1.25em;cursor:pointer;
  border-radius:50%;width:31px;height:31px;box-shadow:0 0 2px #bbb;
  margin-left:5px;
}
#chat-popup-close:hover {background:#ffd5d5;color:#b71c1c;}
#chat-expand-btn {background:none;border:none;cursor:pointer;}
#chat-privatemsg {
  display:none;
  background:#ffd54f;color:#333;border:none;
  border-radius:6px;padding:4px 10px;
  font-size:0.95em;font-weight:600;
  margin-right:8px;cursor:pointer;transition:background .18s,color .18s,opacity .18s;
  opacity: 1;
  pointer-events:auto;
}
#chat-privatemsg.active {
  background:#ff9800 !important;color:#fff !important;
}
#chat-privatemsg:disabled, #chat-privatemsg.disabled {
  opacity:0.5 !important;
  pointer-events:none !important;
  filter: grayscale(60%);
}
#chat-login-area,#chat-main-area {padding:13px 14px 10px 14px;}
#chat-login-area label {display:block;margin:7px 0 3px 0;}
#chat-username {width:85%;padding:7px;border-radius:7px;border:1px solid #bbb;margin-bottom:8px;}
#chat-password-row {margin-bottom:8px;}
#chat-password {width:85%;padding:7px;border-radius:7px;border:1px solid #bbb;}
#chat-login-btn {margin-top:9px;background:#43a047;color:#fff;border:none;border-radius:6px;font-size:1em;font-weight:600;padding:7px 18px;cursor:pointer;}
#chat-logout-btn {margin-left:0;background:#e0e0e0;color:#1976d2;border:none;border-radius:5px;font-size:1em;padding:4px 12px;font-weight:bold;cursor:pointer;}
#chat-logout-btn:hover {background:#ffcdd2;color:#b71c1c;}
#chat-user-list {font-size:0.98em;margin-bottom:7px;}
#chat-to-select {width:98%;padding:6px 6px 6px 10px;border-radius:5px;border:1px solid #ccc;margin-bottom:9px;}
#chat-msgs {background:#f8fafb;border-radius:7px;height:197px;overflow-y:auto;padding:8px 7px 8px 7px;margin-bottom:7px;font-size:1.04em;}
.chat-msg-you {text-align:right;margin:7px 0;}
.chat-msg-you .chat-msg-bubble {background:#bbdefb;color:#1976d2;}
.chat-msg-other {text-align:left;margin:7px 0;}
.chat-msg-other .chat-msg-bubble {background:#f1f8e9;color:#222;}
.chat-msg-bubble {display:inline-block;padding:6px 13px;border-radius:14px;max-width:81%;word-break:break-word;margin-bottom:2px;font-size:1em;}
.chat-msg-username {font-size:0.93em;color:#888;margin-bottom:2px;}
#chat-msg-form {display:flex;align-items:center;margin-top:7px;position:relative;}
#chat-msg-input {flex:1;padding:7px;border-radius:7px;border:1px solid #bbb;font-size:1em;}
#chat-msg-send {background:#1976d2;color:#fff;border:none;border-radius:6px;padding:7px 15px;font-weight:600;margin-left:7px;font-size:1em;cursor:pointer;}
#chat-emoji-toggle {background:none;border:none;font-size:1.3em;cursor:pointer;margin-left:6px;}
#chat-emoji-list {display:none;position:absolute;bottom:45px;right:65px;background:#fff;border:1px solid #ccc;border-radius:10px;box-shadow:0 2px 16px #ccc;z-index:2000;padding:7px 9px;min-width:160px;text-align:center;}
#chat-emoji-list button {border:none;background:none;font-size:1.45em;margin:2px 4px;cursor:pointer;border-radius:7px;padding:2px 2px;transition:background .14s;}
#chat-emoji-list button:hover {background:#eeeeee;}
#chat-info {color:#d32f2f;font-size:0.97em;margin:7px 0 0 0;}
@media (max-width: 900px) {
  #chat-popup-box {width:99vw;max-width:99vw;}
  #chat-popup-box.chat-fullscreen {width:100vw !important;max-width:100vw !important;}
  #chat-header,#chat-main-area,#chat-login-area{padding:10px 3vw;}
  #chat-emoji-list{right:8vw;}
  #chat-msgs{height:30vh;}
}
@media (max-width: 600px) {
  #chat-popup-box {width:100vw;max-width:100vw;}
  #chat-popup-box.chat-fullscreen {width:100vw !important;max-width:100vw !important;}
  #chat-header,#chat-main-area,#chat-login-area{padding:7px 2vw;}
  #chat-emoji-list{right:2vw;}
  #chat-msgs{height:48vw;}
  #chat-msg-input {font-size:1.1em;}
}